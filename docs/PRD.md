# 커피 주문 앱

## 1. 프로젝트 개요

### 1.1 프로젝트명
    커피 주문 앱

### 1.2 프로젝트 목적
    사용자가 커피 메뉴를 주문하고 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹 앱

### 1.3 개발 범위
    - 주문하기 화면(메뉴 선택 및 장바구니 기능)
    - 관리자 화면(재고 관리 및 주문 상태 관리)
    - 데이타를 생성/조회/수정/삭제할 수 있는 기능

## 2. 기술 스택
    - Frontend: React, HTML, CSS, JavaScript
    - Backend: Node.js, Express
    - Database: PostgreSQL

## 3. 기본 사항
    - 프런트엔드와 백엔드를 따로 개발
    - 기본적인 웹 기술만 사용
    - 학습 목적이므로 사용자 인증이나 결제 기능은 제외
    - 메뉴는 커피 메뉴만 있음
    - **데이터 영속성**: 브라우저의 `localStorage`를 사용하여 페이지 새로고침 시에도 주문 및 재고 데이터를 유지함

## 4. 화면별 상세 요구사항

### 4.1 주문하기 화면 (Customer Order Page)
사용자가 메뉴를 확인하고 장바구니에 담아 주문을 진행하는 화면입니다.

#### 4.1.1 레이아웃 구성
- **헤더 (Header)**
    - 배경색: 파란색 (#007bff)
    - 좌측: 서비스 로고 ('COZY', 흰색)
    - 우측: 네비게이션 메뉴 ('주문하기', '관리자', 흰색)
    - 현재 위치한 메뉴인 '주문하기'에는 활성화 표시(강조)가 적용됨
- **레이아웃**
    - 전체 컨텐츠는 웹 브라우저 중앙에 오도록 배치됨 (Max-width: 1200px)
- **메뉴 리스트 영역**
    - 격자(Grid) 형태로 메뉴 카드들이 배치됨
- **장바구니 영역 (Bottom Fixed Bar)**
    - 화면 하단에 고정된 백색 바 형태로 존재
    - 2개 영역으로 분할: 왼쪽(주문 내역), 오른쪽(총액 및 주문하기 버튼)

#### 4.1.2 주요 기능 요구사항
- **메뉴 카드 (Menu Card)**
    - **이미지**: 메뉴 이미지 표시 (상단 영역)
    - **메뉴 정보**: 메뉴명(예: 아메리카노(ICE)), 가격(예: 4,000원), 간단한 설명 표시
    - **옵션 선택**: 체크박스를 통해 옵션 추가 가능
        - 샷 추가 (+500원)
        - 시럽 추가 (0원)
    - **담기 버튼**: 클릭 시 선택한 옵션과 함께 메뉴가 장바구니에 추가됨
        - 추가 성공 시 토스트(Toast) 메시지로 사용자에게 알림
- **장바구니 (Cart)**
    - **목록 표시**: 담긴 메뉴명, 선택 옵션, 수량, 해당 메뉴별 합계 금액 표시
    - **수량 관리**: 
        - 동일 메뉴(동일 옵션 포함)를 여러 번 담을 경우 수량이 증가함 (중복 행 생성 안 함)
        - 장바구니 내 각 아이템에 `+`, `-` 버튼을 제공하여 수량을 직접 조절 가능
        - `-` 버튼을 눌러 수량이 0이 될 경우 해당 아이템은 장바구니에서 삭제됨
    - **UI 구성**: 주문 내역과 총액 영역을 분리하여 직관적으로 표시
    - **총액 계산**: 담긴 모든 메뉴의 총 금액을 합산하여 파란색 강조 텍스트로 표시 (예: 총금액 12,500원)
- **주문하기 기능**
    - **버튼 디자인**: 파란색 배경의 큰 버튼으로 중앙 배치
    - **재고 검증**: '주문하기' 클릭 시 실시간 재고를 확인하여 부족할 경우 경고 메시지 표시 및 주문 차단
    - **주문 처리**: 주문 완료 시 장바구니 내역을 바탕으로 주문 데이터를 생성하고, 실제 재고 수량을 차감함
    - **사용자 피드백**: 주문 완료 후 토스트(Toast) 메시지 표시 및 장바구니/옵션 선택 초기화

### 4.2 관리자 화면 (Admin Dashboard Page)
관리자가 주문 현황을 파악하고, 메뉴의 재고를 관리하며, 주문 상태를 제어하는 화면입니다.

#### 4.2.1 레이아웃 구성
- **헤더 (Header)**
    - 주문하기 화면과 동일하며, '관리자' 메뉴가 활성화됨
- **관리자 대시보드 (Dashboard)**
    - 현재 운영 현황을 한눈에 볼 수 있는 요약 정보창
- **재고 현황 (Inventory Management)**
    - 메뉴별 현재 재고 수량을 확인하고 수정할 수 있는 영역
- **주문 현황 (Order Management)**
    - 시간순으로 나열된 주문 목록 및 상태 변경 영역

#### 4.2.2 주요 기능 요구사항
- **대시보드 요약 정보**
    - **총 주문 수**: 당일 발생한 전체 주문 건수
    - **주문 접수**: 아직 조리가 시작되지 않은 주문 건수
    - **제조 중**: 현재 조리 중인 주문 건수
    - **제조 완료**: 조리가 완료되어 픽업 대기 중인 주문 건수
- **재고 현황 관리**
    - **수량 및 상태 표시**: 각 메뉴별 현재 남아있는 재고 수량 표시
        - **정상**: 재고 5개 이상
        - **주의**: 재고 5개 미만 (주황색 강조)
        - **품절**: 재고 0개 (빨간색 강조)
    - **재고 수정**: `+` 및 `-` 버튼을 통해 재고 수량을 1단위로 즉시 증감 가능
- **주문 현황 및 상태 제어**
    - **주문 상세 정보**: 주문 일자 및 시간, 메뉴명(옵션 포함), 수량, 가격 표시
    - **상태 처리 버튼**: 현재 주문의 다음 단계로 상태를 전환하는 버튼
        - '제조 시작' 버튼 클릭 시: 상태가 '주문 접수'에서 '제조 중'으로 변경
        - '제조 완료' 버튼 클릭 시: 상태가 '제조 중'에서 '제조 완료'로 변경
    - **상태 흐름**: 주문 접수 -> 제조 중 -> 제조 완료

## 5. 백엔드 및 데이터베이스 상세 요구사항

### 5.1 데이터 모델 (Data Model)

- **Menus (메뉴)**
    - ID: 고유 식별자
    - 이름 (name): 커피 메뉴 이름
    - 설명 (description): 메뉴에 대한 간단한 설명
    - 가격 (price): 기본 판매 가격
    - 이미지 (image): 메뉴 이미지 파일 경로 또는 URL
    - 재고 수량 (stock): 현재 판매 가능한 수량
- **Options (옵션)**
    - ID: 고유 식별자
    - 옵션 이름 (name): 옵션 명칭 (예: 샷 추가, 시럽 추가)
    - 옵션 가격 (price): 옵션 선택 시 추가되는 금액
    - 메뉴 ID (menu_id): 해당 옵션이 속한 메뉴 (Menus 테이블 참조)
- **Orders (주문)**
    - ID: 고유 식별자
    - 주문 일시 (created_at): 주문이 생성된 날짜와 시간
    - 총 금액 (total_price): 전체 주문 합계 금액
    - 주문 상태 (status): 현재 상태 (주문 접수 / 제조 중 / 제조 완료)
    - 주문 내용 (items): 주문한 메뉴 리스트, 수량, 선택 옵션, 금액 등을 포함 (JSON 형태 또는 별도의 OrderItems 테이블로 관리)

### 5.2 데이터 흐름 및 사용자 시나리오

1.  **메뉴 로드**: 사용자가 앱에 접속하면 시스템은 `Menus` 및 `Options` 데이터를 조회하여 화면에 표시합니다. 관리자 화면에는 특히 `stock` 정보를 함께 노출합니다.
2.  **장바구니 담기**: 사용자가 선택한 메뉴와 옵션 정보는 클라이언트 사이드의 장바구니에 임시 저장됩니다.
3.  **주문 생성**: 장바구니에서 '주문하기' 버튼을 클릭하면 주문 생성 API가 호출됩니다. 이때 주문 시간과 상세 내용이 `Orders` 테이블에 기록됩니다.
4.  **재고 차감**: 주문이 성공적으로 생성되면 관련 메뉴(`Menus`)의 재고 수량이 주문 수량만큼 감소합니다.
5.  **관리자 확인 및 상태 변경**: `Orders`에 저장된 정보는 관리자 화면의 '주문 현황' 목록에 실시간 또는 주기적으로 조회되어 표시됩니다. 관리자가 버튼을 클릭하면 주문 상태가 '주문 접수' → '제조 중' → '제조 완료' 순으로 업데이트됩니다.

### 5.3 API 설계 (API Design)

- **메뉴 조회 (GET /api/menus)**: 데이터베이스에서 모든 커피 메뉴와 관련 옵션 목록을 불러옵니다.
- **주문 생성 (POST /api/orders)**: 장바구니 데이터를 받아 데이터베이스에 주문 정보를 저장하고, 메뉴의 재고를 실시간으로 업데이트합니다.
- **주문 상세 조회 (GET /api/orders/:id)**: 특정 주문 ID를 전달받아 해당 주문의 상세 정보를 반환합니다.
- **주문 목록 조회 (GET /api/orders)**: (관리자용) 전체 주문 내역을 조회합니다.
- **주문 상태 업데이트 (PATCH /api/orders/:id/status)**: (관리자용) 주문의 진행 상태를 변경합니다.
    